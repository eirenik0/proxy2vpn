refactor: adopt built-in collection generics and PEP 604 optionals
